<?php
namespace App\Traits;

use LaravelDaily\LaravelCharts\Classes\LaravelChart;

Trait TraitDefault{

    public  function code_generate($n = 3)
    {
        $characters = "0123456789";
        $randomString = "Lav"."-" . '';

        for ($i = 0; $i < $n; $i++) {
            $index = rand(0, strlen($characters) - 1);
            $randomString .= $characters[$index];
        }

        return $randomString;
    }

     public function chart_on(){
        $chart_options = [
            'chart_title' => 'Rapport mensuels',
            'report_type' => 'group_by_date',
            'model' => 'App\Models\Order',
            'group_by_field' => 'created_at',
            'group_by_period' => 'month',
            'chart_type' => 'bar',
            'aggregate_function' => 'sum',
            'aggregate_field' => 'total',
            'where_raw' => "status='delivered'  ",
        ];

      return  new LaravelChart($chart_options);

     }
     public function chart_on_by_pressing($id){
        $chart_options = [
            'chart_title' => 'Rapport mensuels',
            'report_type' => 'group_by_date',
            'model' => 'App\Models\Order',
            'group_by_field' => 'created_at',
            'group_by_period' => 'month',
            'chart_type' => 'bar',
            'aggregate_function' => 'sum',
            'aggregate_field' => 'total',
            'where_raw' => "status='delivered' AND pressing_id = $id ",
        ];

      return  new LaravelChart($chart_options);

     }
     public function chart_two(){
        $settings1 = [
            'chart_title'           => 'Clients',
            'chart_type'            => 'pie',
            'report_type'           => 'group_by_date',
            'model'                 => 'App\Models\Customer',
            'group_by_field'        => 'created_at',
            'group_by_period'       => 'day',
            'aggregate_function'    => 'count',
            'filter_field'          => 'created_at',
            'filter_days'           => '30',
            // 'where_raw' => "usertype='user' ",


        ];

      return   new LaravelChart($settings1);
     }

     public function chart_three(){
        $charts = [
            'chart_title' => 'Rapport périodique',
            'chart_type' => 'line',
            'report_type' => 'group_by_date',
            'model' => 'App\Models\Order',


            'group_by_field' => 'created_at',
            'group_by_period' => 'day',

            'aggregate_function' => 'sum',
            'aggregate_field' => 'total',

            'where_raw' => "status='delivered' ",


            'filter_field' => 'created_at',
            'filter_days' => 30, // show only transactions for last 30 days
            'filter_period' => 'week', // show only transactions for this week
        ];
       return  new LaravelChart($charts);
     }
     public function chart_three_by_pressing($id){
        $charts = [
            'chart_title' => 'Rapport périodique',
            'chart_type' => 'line',
            'report_type' => 'group_by_date',
            'model' => 'App\Models\Order',


            'group_by_field' => 'created_at',
            'group_by_period' => 'day',

            'aggregate_function' => 'sum',
            'aggregate_field' => 'total',

            'where_raw' => "status='delivered' AND pressing_id = $id ",


            'filter_field' => 'created_at',
            'filter_days' => 30, // show only transactions for last 30 days
            'filter_period' => 'week', // show only transactions for this week
        ];
       return  new LaravelChart($charts);
     }
     public function chart_four(){

        $chart_options_annuel = [
            'chart_title' => 'Rapport annuel',
            'report_type' => 'group_by_date',
            'model' => 'App\Models\Order',
            'group_by_field' => 'created_at',
            'group_by_period' => 'year',
            'chart_type' => 'bar',
            'aggregate_function' => 'sum',
            'aggregate_field' => 'total',
            'where_raw' => "status='delivered' ",
        ];

      return  new LaravelChart($chart_options_annuel);
     }
     public function chart_four_by_pressing($id){

        $chart_options_annuel = [
            'chart_title' => 'Rapport annuel',
            'report_type' => 'group_by_date',
            'model' => 'App\Models\Order',
            'group_by_field' => 'created_at',
            'group_by_period' => 'year',
            'chart_type' => 'bar',
            'aggregate_function' => 'sum',
            'aggregate_field' => 'total',
            'where_raw' => "status='delivered' AND pressing_id = $id ",
        ];

      return  new LaravelChart($chart_options_annuel);
     }

}
